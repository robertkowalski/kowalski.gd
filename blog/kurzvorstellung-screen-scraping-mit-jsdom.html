
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Kurzvorstellung: Screen Scraping mit node & jsdom</title>
  <meta name="author" content="Robert Kowalski" />
  <!-- Homepage CSS -->
  <meta name="google-site-verification" content="vzd_Qx8aTVcPM4CvUaiUc4dwGtU5enYVAqYotJEdYjY" />
  <link rel="stylesheet" href="/assets/css/styles-min.css" type="text/css" />

  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"/>
  <link rel="alternate" type="application/atom+xml" title="kowalski.gd atom feed" href="/atom.xml" />
  <link rel="alternate" type="application/rss+xml" title="kowalski.gd RSS feed" href="/rss.xml">
  <link rel="canonical" href="http://kowalski.gd">
</head>
<body>

  <div class="site">
    <div class="title">
      <a href="/">robert kowalski</a>

      <!--a class="extra" href="/archive.html">Archive</a-->
      <!--a class="extra" href="">Pages</a-->
      <!--a class="extra" href="/categories.html">Categories</a-->
      <!--a class="extra" href="/tags.html">Tags</a-->
      <a class="extra" href="http://theclibook.com">The CLI Book</a>
      <a class="extra" href="/imprint.html">Impressum</a>
    </div>

    
<div id="post">
  <h1>Kurzvorstellung: Screen Scraping mit node & jsdom</h1>
  <p class="meta">
    11 March 2012 
    
  </p>
  <p>Ein sehr praktisches Tool ist <a href="https://github.com/tmpvar/jsdom">jsdom</a>, ein Modul von Elijah Insua für node.js.
Jsdom bringt das DOM zu node.js und es lassen sich tolle Screen Scraper und andere Tools für die Konsole bauen.</p>

<p>Man munkelt, einige geben sich damit sogar den aktuellen Fahrplan des jeweiligen Personen-Nahverkehrs auf ihrer Shell aus.</p>

<!-- more -->

<p>Ich möchte jsdom hier einmal ganz kurz vorstellen und zeigen, wie schnell ich die Titel der Artikel von Startseite
meines Blogs auf meiner Shell ausgeben kann.
Natürlich sind noch viele andere nützliche Szenarien oder Anwendungsfälle denkbar, jedoch sollte man das deutsche Urheberrecht im Hinterkopf
behalten.</p>

<h2>Installation</h2>

<p>Man installiert jsdom mit Hilfe von npm:</p>

<figure class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>npm install jsdom</code></pre></figure>

<p>Sollte man den Fehler bekommen <code>node-waf</code> würde fehlen, so sollte man das Paket <code>nodejs-dev</code> nachinstallieren.</p>

<h2>Beispielprogramm</h2>

<p>Wie bereits erwähnt wollen wir hier ganz schnell Elemente meines Blogs scrapen.</p>

<p>Ein typischer jsdom-Aufruf besteht als erstes immer aus der Zielurl.</p>

<p>Als zweite Angabe folgen dann gewünschte Libraries wie jQuery, die geladen werden können und zur Interaktion mit dem DOM benutzt werden.</p>

<p>Als letztes Argument folgt dann eine Callback-Funktion, die aufgerufen wird, wenn wir unser DOM und die Library geladen haben.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">jsdom</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;jsdom&#39;</span><span class="p">);</span>

<span class="nx">jsdom</span><span class="p">.</span><span class="nx">env</span><span class="p">(</span><span class="s1">&#39;http://robert-kowalski.de&#39;</span><span class="p">,</span> <span class="p">[</span>
  <span class="s1">&#39;http://code.jquery.com/jquery-1.7.1.min.js&#39;</span>
<span class="p">],</span> <span class="nx">listAllArticles</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">listAllArticles</span><span class="p">(</span><span class="nx">errors</span><span class="p">,</span> <span class="nb">window</span><span class="p">)</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$</span> <span class="o">=</span> <span class="nb">window</span><span class="p">.</span><span class="nx">$</span><span class="p">;</span>

  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;article&#39;</span><span class="p">).</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;header&#39;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">find</span><span class="p">(</span><span class="s1">&#39;a&#39;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">each</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">element</span><span class="p">)</span> <span class="p">{</span>
          <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">$</span><span class="p">(</span><span class="nx">element</span><span class="p">).</span><span class="nx">text</span><span class="p">());</span>
      <span class="p">});</span>
<span class="p">};</span></code></pre></figure>

<p>Und schon bekomme ich mit <code>$ node blogscraper.js</code> meine Artikeltitel auf der Startseite von robert-kowalski.de angezeigt:</p>

<pre>
  Cross platform Test Driven Development (TDD) mit Jasmine, jQuery Mobile, Phonegap und node
  Private und Public in JavaScript
</pre>

<p><img src="http://vg09.met.vgwort.de/na/ce3f753e3e204c2b9519b7c639467e3e" width="1" height="1" alt=""></p>

</div>

<div id="related">
  <h2>Related Posts</h2>
  <ul class="posts">
    
      <li class="small-bordered">
        <span class="small-hide">10 Feb 2016&raquo; </span>
        <a href="/blog/high-performance-erlang-finding-bottlenecks-couchdb-1">High Performance Erlang - Finding Bottlenecks in a CouchDB Cluster #1</a>
      </li>
    
      <li class="small-bordered">
        <span class="small-hide">09 Oct 2015&raquo; </span>
        <a href="/blog/software-development-in-cuba">Software development in Cuba</a>
      </li>
    
      <li class="small-bordered">
        <span class="small-hide">02 Mar 2015&raquo; </span>
        <a href="/blog/what-happened-while-contributing-to-open-source-on-a-daily-basis-for-one-year">What happened while contributing to Open Source on a daily basis for one year</a>
      </li>
    
  </ul>
</div>





    <div class="footer">
      <div class="contact">
        <p>
          Robert Kowalski<br />
          <br />
          rok@kowalski.gd
        </p>
      </div>
      <div class="contact">
        <p>
          <a href="http://github.com/robertkowalski/">github.com/robertkowalski</a><br />
          <a href="http://twitter.com/robinson_k/">twitter.com/robinson_k</a><br />
        </p>
      </div>
    </div>
  </div>

  


  <script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-28167405-1', 'auto');
  ga('set', 'anonymizeIp', true);
  ga('send', 'pageview');
</script>




</body>
</html>

